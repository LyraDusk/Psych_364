---
title: "Data Wrangling Temp"
author: "Lauren Meyer"
date: "March 29, 2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readr)
```

This file is not meant to be a final part, it's where I'm keeping the data wrangling code until we can incorporate it into the final paper. -Lauren

```{r }
dailydiary <- read_csv("TeleCom_Dyad_dailydiary.csv")
premeasures <- read_csv("TeleCom_Dyad_premeasures.csv")
view(dailydiary)
```

## Including Plots

You can also embed plots, for example:

```{r, echo=FALSE}
#Simple helper function to convert "Yes" and "No" to 1 and 0 for summing
YesNo <- function(x){
    ifelse(x=="Yes", 1,0)
}
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.


For daily diaries chore level: Sum number of childcare tasks for each partner over all days. Keep dyad id, participant id, gender, and sum of tasks
to filter couples with no children, join to premeasures, check for numbers in people_4_TEXT and people_5_TEXT

```{r childcare}
filter_children <- premeasures %>%
  select(ResponseId, dyadID, people_4_TEXT, people_5_TEXT) %>%
  mutate(people_4_TEXT = ifelse(is.na(people_4_TEXT), 0, people_4_TEXT)) %>%
  mutate(people_5_TEXT = ifelse(is.na(people_5_TEXT), 0, people_5_TEXT)) %>%
  mutate(children = ifelse(people_4_TEXT > 0, 1, ifelse(people_5_TEXT > 0, 1, 0)), childnum = people_4_TEXT + people_5_TEXT, na.rm = TRUE) %>%
  select(ResponseId, children, childnum)

clean_dd <- dailydiary %>%
  select(partID, dyadID, gender, homeschool, attention, worrying, activities, clothes, sick, getting_up, put_to_bed, discipline, reading, playing, picking_up, hygiene, dressing, comforting, feeding) %>%
  mutate_at(vars(-partID, -dyadID, -gender),YesNo) %>%
  mutate_if(is.numeric, funs(ifelse(is.na(.), 0, .)))

chores_final <- inner_join(clean_dd, filter_children, by = c("partID" = "ResponseId")) %>%
  filter(children == 1) %>%
  mutate(total_chores = rowSums(across(c(homeschool, attention, worrying, activities, clothes, sick, getting_up, put_to_bed, discipline, reading, playing, picking_up, hygiene, dressing, comforting, feeding), na.rm = TRUE))) %>%
  group_by(partID) %>%
  summarize(total_chores = sum(total_chores))
```

Self- and Other-objectification scores: 
Column variables correspond to the factors that are being ranked, the value is the rank of said factor. 

Scores should range from -25 to 25, with higher scores representing a greater focus on attractiveness and greater objectification. 

```{r self-objectification}
comp_v <- c(1,2,4,7,9)
attr_v <- c(3,5,6,8,10)
self_obj <- premeasures %>%
  select(ResponseId, dyadID, `self-object_1`, `self-object_2`, `self-object_3`, `self-object_4`, `self-object_5`, `self-object_6`, `self-object_7`, `self-object_8`, `self-object_9`, `self-object_10`) %>%
  mutate(comp = `self-object_1` + `self-object_2` + `self-object_4` + `self-object_7` + `self-object_9`, attr = `self-object_3` + `self-object_5` + `self-object_6` + `self-object_8` + `self-object_10`) %>%
  mutate(self_obj_score = comp - attr) %>%
  mutate(self_obj_score = ifelse(is.na(`self-object_1`), NA, self_obj_score)) %>%
  select(ResponseId, self_obj_score)

```

```{r other-objectification}
other_obj <- premeasures %>%
  select(ResponseId, dyadID, `other-object_1`, `other-object_2`, `other-object_3`, `other-object_4`, `other-object_5`, `other-object_6`, `other-object_7`, `other-object_8`, `other-object_9`, `other-object_10`) %>%
  mutate(comp = `other-object_1` + `other-object_2` + `other-object_4` + `other-object_7` + `other-object_9`, attr = `other-object_3` + `other-object_5` + `other-object_6` + `other-object_8` + `other-object_10`) %>%
  mutate(other_obj_score = comp - attr) %>%
  mutate(other_obj_score = ifelse(is.na(`other-object_1`), NA, other_obj_score)) %>%
  select(ResponseId, other_obj_score)
```

```{r combined-objectification}
objectification <- inner_join(self_obj, other_obj, by = c("ResponseId" = "ResponseId"))
```



